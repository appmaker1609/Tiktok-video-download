<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SagarMini TikTok Downloader - Download Videos Without Watermark</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        dark: '#181818',
                        'dark-secondary': '#2a2a2a',
                        'dark-accent': '#3a3a3a'
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
        }
        .dark .glass-effect {
            background: rgba(0, 0, 0, 0.3);
        }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.22.0"
  }
}
</script>
</head>
<body class="bg-white dark:bg-dark min-h-screen transition-colors duration-300">
    <!-- Navigation Header -->
    <header class="bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500 shadow-xl sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <img src="https://pfst.cf2.poecdn.net/base/image/4aa1fe1fc423cec322716791b0f833027ffa845f3a2d629b2939fd8331ba5830?w=1016&h=1016" 
                             alt="SagarMini Logo" 
                             class="w-14 h-14 rounded-full border-3 border-white shadow-lg object-cover">
                        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-400 border-2 border-white rounded-full animate-pulse"></div>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white drop-shadow-lg">SagarMini</h1>
                        <p class="text-sm text-blue-100 font-medium">TikTok VD Downloader</p>
                    </div>
                </div>
                <button id="menuBtn" class="lg:hidden p-2 rounded-lg bg-white/20 text-white hover:bg-white/30 transition-colors">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <nav id="desktopNav" class="hidden lg:flex space-x-6">
                    <a href="#" onclick="showSection('home')" class="nav-link text-white hover:text-yellow-300 transition-colors font-medium">Download</a>
                    <a href="#" onclick="showSection('how-to')" class="nav-link text-white hover:text-yellow-300 transition-colors font-medium">How to Download?</a>
                    <a href="#" onclick="showSection('history')" class="nav-link text-white hover:text-yellow-300 transition-colors font-medium">History</a>
                    <a href="#" onclick="showSection('faq')" class="nav-link text-white hover:text-yellow-300 transition-colors font-medium">FAQ</a>
                    <a href="#" onclick="showSection('contact')" class="nav-link text-white hover:text-yellow-300 transition-colors font-medium">Contact</a>
                </nav>
            </div>
        </div>
        
        <!-- Mobile Navigation -->
        <nav id="mobileNav" class="lg:hidden hidden bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 border-t border-white/20">
            <div class="container mx-auto px-4 py-3 space-y-1">
                <a href="#" onclick="showSection('home')" class="block py-3 px-4 text-white hover:bg-white/20 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-download mr-3"></i>Download TikTok Videos
                </a>
                <a href="#" onclick="showSection('how-to')" class="block py-3 px-4 text-white hover:bg-white/20 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-question-circle mr-3"></i>How to Download?
                </a>
                <a href="#" onclick="showSection('history')" class="block py-3 px-4 text-white hover:bg-white/20 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-history mr-3"></i>History
                </a>
                <a href="#" onclick="showSection('faq')" class="block py-3 px-4 text-white hover:bg-white/20 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-info-circle mr-3"></i>FAQ
                </a>
                <a href="#" onclick="showSection('contact')" class="block py-3 px-4 text-white hover:bg-white/20 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-envelope mr-3"></i>Contact Us
                </a>
                <a href="#" onclick="showSection('privacy')" class="block py-3 px-4 text-white hover:bg-white/20 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-shield-alt mr-3"></i>Privacy Policy
                </a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <!-- Home Section - Video Downloader -->
        <section id="home" class="section">
            <div class="max-w-2xl mx-auto">
                <!-- Hero Section -->
                <div class="text-center mb-8 animate-fade-in">
                    <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 dark:text-white mb-4">
                        Download TikTok Videos
                        <span class="text-primary">Without Watermark</span>
                    </h2>
                    <p class="text-gray-600 dark:text-gray-300 text-lg">
                        Fast, free, and secure TikTok video downloader. No registration required.
                    </p>
                </div>

                <!-- URL Input Form -->
                <div class="bg-white dark:bg-dark-secondary rounded-2xl shadow-xl p-6 mb-6 transition-colors duration-300">
                    <div class="space-y-4">
                        <div class="relative">
                            <input 
                                type="url" 
                                id="tiktokUrl" 
                                placeholder="Paste TikTok video URL here..." 
                                class="w-full px-4 py-4 text-base border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:border-primary focus:outline-none bg-white dark:bg-dark-accent text-gray-800 dark:text-white transition-all duration-300"
                            >
                            <button 
                                id="pasteBtn" 
                                class="absolute right-2 top-2 px-4 py-2 bg-gray-100 dark:bg-dark-accent text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-300"
                            >
                                <i class="fas fa-paste mr-2"></i>Paste
                            </button>
                        </div>
                        
                        <button 
                            id="downloadBtn" 
                            class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:from-purple-600 hover:to-primary transition-all duration-300 transform hover:scale-105 shadow-lg"
                            disabled
                        >
                            <i class="fas fa-download mr-2"></i>
                            <span id="downloadBtnText">Get Video</span>
                        </button>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="loadingState" class="hidden bg-white dark:bg-dark-secondary rounded-2xl shadow-xl p-6 mb-6 text-center">
                    <div class="animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"></div>
                    <p class="text-gray-600 dark:text-gray-300">Processing your video...</p>
                </div>

                <!-- Video Preview and Download Options -->
                <div id="videoResult" class="hidden bg-white dark:bg-dark-secondary rounded-2xl shadow-xl p-6 mb-6 animate-fade-in">
                    <div id="videoPreview" class="mb-6">
                        <!-- Video preview will be inserted here -->
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <button 
                            id="downloadVideoBtn" 
                            class="flex items-center justify-center px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-300"
                        >
                            <i class="fas fa-video mr-3"></i>
                            Download Video (MP4)
                        </button>
                        
                        <button 
                            id="downloadAudioBtn" 
                            class="flex items-center justify-center px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300"
                        >
                            <i class="fas fa-music mr-3"></i>
                            Download Audio (MP3)
                        </button>
                    </div>
                    
                    <div class="mt-4 flex justify-center space-x-4">
                        <button id="favoriteBtn" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                            <i class="fas fa-heart mr-2"></i>Add to Favorites
                        </button>
                        <button id="shareBtn" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                            <i class="fas fa-share mr-2"></i>Share
                        </button>
                    </div>
                </div>

                <!-- Error Message -->
                <div id="errorMessage" class="hidden bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
                        <span id="errorText" class="text-red-700 dark:text-red-400"></span>
                    </div>
                </div>

                <!-- Recent Downloads -->
                <div id="recentDownloads" class="bg-white dark:bg-dark-secondary rounded-2xl shadow-xl p-6">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">
                        <i class="fas fa-clock mr-2 text-primary"></i>Recent Downloads
                    </h3>
                    <div id="recentList" class="space-y-3">
                        <p class="text-gray-500 dark:text-gray-400 text-center py-8">No recent downloads</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How to Download Section -->
        <section id="how-to" class="section hidden">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-8 text-center">How to Download TikTok Videos?</h2>
                
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white dark:bg-dark-secondary rounded-xl p-6 shadow-lg text-center">
                        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-copy text-white text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-3 text-gray-800 dark:text-white">Step 1: Copy URL</h3>
                        <p class="text-gray-600 dark:text-gray-300">Copy the TikTok video URL from the TikTok app or website</p>
                    </div>
                    
                    <div class="bg-white dark:bg-dark-secondary rounded-xl p-6 shadow-lg text-center">
                        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-paste text-white text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-3 text-gray-800 dark:text-white">Step 2: Paste URL</h3>
                        <p class="text-gray-600 dark:text-gray-300">Paste the URL in our downloader and click "Get Video"</p>
                    </div>
                    
                    <div class="bg-white dark:bg-dark-secondary rounded-xl p-6 shadow-lg text-center">
                        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-download text-white text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-3 text-gray-800 dark:text-white">Step 3: Download</h3>
                        <p class="text-gray-600 dark:text-gray-300">Choose video or audio format and download without watermark</p>
                    </div>
                </div>

                <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-800 dark:text-blue-300 mb-4">
                        <i class="fas fa-info-circle mr-2"></i>Important Tips
                    </h3>
                    <ul class="space-y-2 text-blue-700 dark:text-blue-300">
                        <li><i class="fas fa-check mr-2"></i>Make sure the TikTok video is public</li>
                        <li><i class="fas fa-check mr-2"></i>Our service removes watermarks automatically</li>
                        <li><i class="fas fa-check mr-2"></i>Downloads are available in HD quality</li>
                        <li><i class="fas fa-check mr-2"></i>No registration or login required</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section id="history" class="section hidden">
            <div class="max-w-4xl mx-auto">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 dark:text-white">Download History</h2>
                    <button id="clearHistoryBtn" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                        <i class="fas fa-trash mr-2"></i>Clear All
                    </button>
                </div>

                <div class="grid gap-4">
                    <div class="bg-white dark:bg-dark-secondary rounded-xl p-4 shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-semibold text-gray-800 dark:text-white">Favorites</h3>
                            <span class="text-sm text-gray-500 dark:text-gray-400" id="favoritesCount">0 items</span>
                        </div>
                        <div id="favoritesList" class="space-y-2">
                            <p class="text-gray-500 dark:text-gray-400 text-center py-4">No favorites yet</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-dark-secondary rounded-xl p-4 shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-semibold text-gray-800 dark:text-white">All Downloads</h3>
                            <span class="text-sm text-gray-500 dark:text-gray-400" id="historyCount">0 items</span>
                        </div>
                        <div id="historyList" class="space-y-2">
                            <p class="text-gray-500 dark:text-gray-400 text-center py-4">No download history</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="section hidden">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-8 text-center">Frequently Asked Questions</h2>
                
                <div class="space-y-4">
                    <div class="bg-white dark:bg-dark-secondary rounded-xl shadow-lg overflow-hidden">
                        <button class="faq-question w-full text-left p-6 focus:outline-none hover:bg-gray-50 dark:hover:bg-dark-accent transition-colors" data-target="faq1">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Is this TikTok downloader free?</h3>
                                <i class="fas fa-chevron-down text-gray-400 transform transition-transform"></i>
                            </div>
                        </button>
                        <div id="faq1" class="faq-answer hidden px-6 pb-6">
                            <p class="text-gray-600 dark:text-gray-300">Yes, our TikTok downloader is completely free to use. You can download unlimited videos without any charges or registration.</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-dark-secondary rounded-xl shadow-lg overflow-hidden">
                        <button class="faq-question w-full text-left p-6 focus:outline-none hover:bg-gray-50 dark:hover:bg-dark-accent transition-colors" data-target="faq2">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Are downloads really without watermarks?</h3>
                                <i class="fas fa-chevron-down text-gray-400 transform transition-transform"></i>
                            </div>
                        </button>
                        <div id="faq2" class="faq-answer hidden px-6 pb-6">
                            <p class="text-gray-600 dark:text-gray-300">Yes, our service automatically removes TikTok watermarks from downloaded videos, giving you clean, high-quality content.</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-dark-secondary rounded-xl shadow-lg overflow-hidden">
                        <button class="faq-question w-full text-left p-6 focus:outline-none hover:bg-gray-50 dark:hover:bg-dark-accent transition-colors" data-target="faq3">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">What video quality can I download?</h3>
                                <i class="fas fa-chevron-down text-gray-400 transform transition-transform"></i>
                            </div>
                        </button>
                        <div id="faq3" class="faq-answer hidden px-6 pb-6">
                            <p class="text-gray-600 dark:text-gray-300">We provide HD quality downloads whenever possible. The quality depends on the original video uploaded to TikTok.</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-dark-secondary rounded-xl shadow-lg overflow-hidden">
                        <button class="faq-question w-full text-left p-6 focus:outline-none hover:bg-gray-50 dark:hover:bg-dark-accent transition-colors" data-target="faq4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Is it safe to use this downloader?</h3>
                                <i class="fas fa-chevron-down text-gray-400 transform transition-transform"></i>
                            </div>
                        </button>
                        <div id="faq4" class="faq-answer hidden px-6 pb-6">
                            <p class="text-gray-600 dark:text-gray-300">Absolutely! We don't store your data, require registration, or collect personal information. Your privacy is our priority.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section hidden">
            <div class="max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-8 text-center">Contact Us</h2>
                
                <div class="bg-white dark:bg-dark-secondary rounded-xl shadow-xl p-8">
                    <form id="contactForm" class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Name</label>
                            <input type="text" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-accent text-gray-800 dark:text-white text-base" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                            <input type="email" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-accent text-gray-800 dark:text-white text-base" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subject</label>
                            <input type="text" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-accent text-gray-800 dark:text-white text-base" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Message</label>
                            <textarea rows="5" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-accent text-gray-800 dark:text-white text-base" required></textarea>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-600 hover:to-primary transition-all duration-300">
                            <i class="fas fa-paper-plane mr-2"></i>Send Message
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Privacy Policy Section -->
        <section id="privacy" class="section hidden">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-8 text-center">Privacy Policy</h2>
                
                <div class="bg-white dark:bg-dark-secondary rounded-xl shadow-xl p-8 space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-3">Data Collection</h3>
                        <p class="text-gray-600 dark:text-gray-300">We do not collect, store, or share any personal information. Our service processes TikTok URLs temporarily to provide download links.</p>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-3">Usage Data</h3>
                        <p class="text-gray-600 dark:text-gray-300">We may collect anonymous usage statistics to improve our service, but no personal information is involved.</p>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-3">Security</h3>
                        <p class="text-gray-600 dark:text-gray-300">All communications are encrypted and secure. We use industry-standard security measures to protect our service.</p>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-3">Contact Information</h3>
                        <p class="text-gray-600 dark:text-gray-300">If you have any questions about this Privacy Policy, please contact us through our contact form.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-gray-900 via-purple-900 to-pink-900 text-white py-12 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <div class="md:col-span-2">
                    <div class="flex items-center space-x-4 mb-4">
                        <img src="https://pfst.cf2.poecdn.net/base/image/4aa1fe1fc423cec322716791b0f833027ffa845f3a2d629b2939fd8331ba5830?w=1016&h=1016" 
                             alt="SagarMini Logo" 
                             class="w-12 h-12 rounded-full border-2 border-white shadow-lg">
                        <div>
                            <h3 class="text-2xl font-bold text-white">SagarMini</h3>
                            <p class="text-pink-200">TikTok VD Downloader</p>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">The most trusted and fastest TikTok video downloader. Download unlimited videos without watermarks, completely free!</p>
                    <div class="flex space-x-4">
                        <div class="bg-gradient-to-br from-blue-500 to-purple-600 p-3 rounded-full">
                            <i class="fab fa-facebook-f text-white"></i>
                        </div>
                        <div class="bg-gradient-to-br from-pink-500 to-red-600 p-3 rounded-full">
                            <i class="fab fa-instagram text-white"></i>
                        </div>
                        <div class="bg-gradient-to-br from-blue-400 to-blue-600 p-3 rounded-full">
                            <i class="fab fa-twitter text-white"></i>
                        </div>
                        <div class="bg-gradient-to-br from-green-400 to-blue-500 p-3 rounded-full">
                            <i class="fab fa-whatsapp text-white"></i>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4 text-yellow-300"><i class="fas fa-link mr-2"></i>Quick Links</h4>
                    <ul class="space-y-3 text-gray-300">
                        <li><a href="#" onclick="showSection('home')" class="hover:text-yellow-300 transition-colors duration-300 flex items-center"><i class="fas fa-download mr-2 w-4"></i>Download Videos</a></li>
                        <li><a href="#" onclick="showSection('how-to')" class="hover:text-yellow-300 transition-colors duration-300 flex items-center"><i class="fas fa-question-circle mr-2 w-4"></i>How to Use</a></li>
                        <li><a href="#" onclick="showSection('faq')" class="hover:text-yellow-300 transition-colors duration-300 flex items-center"><i class="fas fa-info-circle mr-2 w-4"></i>FAQ</a></li>
                        <li><a href="#" onclick="showSection('contact')" class="hover:text-yellow-300 transition-colors duration-300 flex items-center"><i class="fas fa-envelope mr-2 w-4"></i>Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4 text-green-300"><i class="fas fa-shield-alt mr-2"></i>Legal & Security</h4>
                    <ul class="space-y-3 text-gray-300">
                        <li><a href="#" onclick="showSection('privacy')" class="hover:text-green-300 transition-colors duration-300 flex items-center"><i class="fas fa-user-shield mr-2 w-4"></i>Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-green-300 transition-colors duration-300 flex items-center"><i class="fas fa-file-contract mr-2 w-4"></i>Terms of Service</a></li>
                        <li class="flex items-center text-green-400"><i class="fas fa-check-circle mr-2 w-4"></i>100% Safe</li>
                        <li class="flex items-center text-blue-400"><i class="fas fa-lock mr-2 w-4"></i>SSL Secured</li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-white/20 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-center md:text-left">
                        <p class="text-gray-300">&copy; 2024 <span class="text-yellow-300 font-semibold">SagarMini App Creator</span>. All rights reserved.</p>
                        <p class="text-pink-300 text-sm">Made with <i class="fas fa-heart text-red-400 animate-pulse"></i> for TikTok lovers worldwide</p>
                    </div>
                    <div class="flex items-center space-x-2 text-sm">
                        <div class="bg-green-500 w-2 h-2 rounded-full animate-pulse"></div>
                        <span class="text-green-300">Service Online</span>
                        <span class="text-gray-400">|</span>
                        <span class="text-blue-300">ðŸš€ Fast Downloads</span>
                        <span class="text-gray-400">|</span>
                        <span class="text-purple-300">âœ¨ No Watermark</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Progress Modal -->
    <div id="progressModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-dark-secondary rounded-xl p-6 max-w-sm w-full mx-4">
            <div class="text-center">
                <div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-2">Downloading...</h3>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4">
                    <div id="progressBar" class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <p id="progressText" class="text-gray-600 dark:text-gray-300">0%</p>
            </div>
        </div>
    </div>

    <script>
        // Application State
        let currentVideoData = null;
        let downloadHistory = JSON.parse(localStorage.getItem('downloadHistory') || '[]');
        let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

        // Theme Management
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Navigation Functions
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById('mobileNav').classList.add('hidden');
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('text-primary', 'font-semibold'));
            window.scrollTo(0, 0);
        }

        // Mobile Menu Toggle
        document.getElementById('menuBtn').addEventListener('click', () => {
            document.getElementById('mobileNav').classList.toggle('hidden');
        });

        // URL Input Management
        const tiktokUrlInput = document.getElementById('tiktokUrl');
        const downloadBtn = document.getElementById('downloadBtn');
        const pasteBtn = document.getElementById('pasteBtn');

        tiktokUrlInput.addEventListener('input', (e) => {
            downloadBtn.disabled = !isValidTikTokUrl(e.target.value.trim());
        });

        pasteBtn.addEventListener('click', async () => {
            try {
                const text = await navigator.clipboard.readText();
                tiktokUrlInput.value = text;
                downloadBtn.disabled = !isValidTikTokUrl(text);
            } catch (err) {
                showError('Unable to paste from clipboard. Please paste manually.');
            }
        });

        function isValidTikTokUrl(url) {
            const tiktokRegex = /^https?:\/\/(www\.)?(tiktok\.com|vm\.tiktok\.com|vt\.tiktok\.com|m\.tiktok\.com|t\.tiktok\.com)/;
            return tiktokRegex.test(url);
        }

        // --- Core Video Processing ---

        downloadBtn.addEventListener('click', async () => {
            const url = tiktokUrlInput.value.trim();
            if (!isValidTikTokUrl(url)) {
                showError('Please enter a valid TikTok URL');
                return;
            }
            await processVideoUrl(url);
        });

        async function processVideoUrl(url) {
            showLoading(true);
            hideError();
            hideVideoResult();
            await downloadFromApi(url);
            showLoading(false);
        }

        async function downloadFromApi(url) {
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const apiUrl = 'https://lovetik.com/api/ajax/search';

            try {
                const response = await fetch(proxyUrl + encodeURIComponent(apiUrl), {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' },
                    body: `query=${encodeURIComponent(url)}`
                });

                if (!response.ok) throw new Error(`API status: ${response.status}`);
                const data = await response.json();
                if (data.status !== 'ok' || !data.data) throw new Error(data.mess || 'Invalid API response');
                
                const videoInfo = data.data;
                const photoLinks = videoInfo.links.filter(link => link.type === 'jpg' && !link.watermark);

                if (photoLinks.length > 0) {
                    currentVideoData = {
                        images: photoLinks.map(p => p.url),
                        audio: [], // Photos don't have a separate audio track
                        thumbnail: videoInfo.cover,
                        title: videoInfo.desc || 'TikTok Photo Set',
                        author: videoInfo.author?.unique_id || extractUsernameFromUrl(url),
                        url: url,
                        timestamp: Date.now()
                    };
                    showPhotoResult(currentVideoData);
                    return;
                }

                const noWatermarkLink = videoInfo.links.find(link => link.type === 'mp4' && !link.watermark);
                const audioLink = videoInfo.links.find(link => link.type === 'mp3' && !link.watermark);
                
                if (!noWatermarkLink) throw new Error('No watermark-free video found.');

                currentVideoData = {
                    video: [noWatermarkLink.url],
                    audio: audioLink ? [audioLink.url] : [],
                    thumbnail: videoInfo.cover,
                    title: videoInfo.desc || 'TikTok Video',
                    author: videoInfo.author?.unique_id || extractUsernameFromUrl(url),
                    url: url,
                    timestamp: Date.now()
                };
                showVideoResult(currentVideoData);

            } catch (error) {
                console.error('API download failed:', error);
                await simulateApiCall(url);
                showError('Could not fetch video. Displaying demo content.');
            }
        }

        async function simulateApiCall(url) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const mockResponse = {
                        video: [`https://example.com/video/${Date.now()}.mp4`],
                        audio: [`https://example.com/audio/${Date.now()}.mp3`],
                        thumbnail: `https://picsum.photos/300/400?random=${Date.now()}`,
                        title: 'Demo TikTok Video (API Unavailable)',
                        author: extractUsernameFromUrl(url),
                        url: url,
                        timestamp: Date.now()
                    };
                    currentVideoData = mockResponse;
                    showVideoResult(mockResponse);
                    resolve(mockResponse);
                }, 1000);
            });
        }

        // --- UI State Management ---
        function showLoading(show) {
            const loadingState = document.getElementById('loadingState');
            const downloadBtn = document.getElementById('downloadBtn');
            loadingState.classList.toggle('hidden', !show);
            downloadBtn.disabled = show;
            document.getElementById('downloadBtnText').textContent = show ? 'Processing...' : 'Get Video';
        }

        function showVideoResult(videoData) {
            document.getElementById('videoPreview').innerHTML = `
                <div class="flex items-start space-x-4">
                    <img src="${videoData.thumbnail}" alt="Video thumbnail" class="w-24 h-32 object-cover rounded-lg">
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-800 dark:text-white mb-2">${videoData.title}</h3>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-2">@${videoData.author}</p>
                        <div class="flex items-center text-xs text-gray-500 space-x-4">
                            <span><i class="fas fa-calendar mr-1"></i>${new Date().toLocaleDateString()}</span>
                            <span><i class="fas fa-eye mr-1"></i>Ready to download</span>
                        </div>
                    </div>
                </div>`;
            document.getElementById('downloadVideoBtn').innerHTML = '<i class="fas fa-video mr-3"></i>Download Video (MP4)';
            document.getElementById('downloadAudioBtn').style.display = 'flex';
            document.getElementById('videoResult').classList.remove('hidden');
        }

        function showPhotoResult(photoData) {
            const photoGrid = photoData.images.slice(0, 4).map((img, index) => 
                `<img src="${img}" alt="Photo ${index + 1}" class="w-16 h-20 object-cover rounded border-2 border-gray-200">`
            ).join('');
            
            document.getElementById('videoPreview').innerHTML = `
                <div class="flex items-start space-x-4">
                    <div class="grid grid-cols-2 gap-2">${photoGrid}</div>
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-800 dark:text-white mb-2">${photoData.title}</h3>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-2">@${photoData.author}</p>
                        <div class="flex items-center text-xs text-gray-500 space-x-4">
                            <span><i class="fas fa-images mr-1"></i>${photoData.images.length} photos</span>
                        </div>
                    </div>
                </div>`;
            document.getElementById('downloadVideoBtn').innerHTML = '<i class="fas fa-images mr-3"></i>Download Photos (ZIP)';
            document.getElementById('downloadAudioBtn').style.display = 'none';
            document.getElementById('videoResult').classList.remove('hidden');
        }

        function hideVideoResult() {
            document.getElementById('videoResult').classList.add('hidden');
        }

        function showError(message) {
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            document.getElementById('errorMessage').classList.remove('hidden');
            setTimeout(hideError, 5000);
        }

        function hideError() {
            document.getElementById('errorMessage').classList.add('hidden');
        }

        // --- Download Handlers ---
        document.getElementById('downloadVideoBtn').addEventListener('click', () => {
            if (!currentVideoData) return;
            if (currentVideoData.images && currentVideoData.images.length > 0) {
                downloadPhotosAsZip(currentVideoData.images, `${currentVideoData.author}_photos.zip`);
            } else if (currentVideoData.video && currentVideoData.video.length > 0) {
                downloadFile(currentVideoData.video[0], 'video.mp4', 'video');
            }
        });

        document.getElementById('downloadAudioBtn').addEventListener('click', () => {
            if (currentVideoData && currentVideoData.audio && currentVideoData.audio.length > 0) {
                downloadFile(currentVideoData.audio[0], 'audio.mp3', 'audio');
            }
        });
        
        async function downloadFile(url, filename, type) {
            showProgressModal(true);
            updateProgress(0); // Reset progress

            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            
            try {
                // Fetch the file through a CORS proxy to enable blob creation
                const response = await fetch(proxyUrl + encodeURIComponent(url));
                if (!response.ok) throw new Error('Proxy fetch failed');

                const blob = await response.blob();
                updateProgress(100); // Mark as complete after blob is ready

                setTimeout(() => {
                    const downloadUrl = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = downloadUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                    URL.revokeObjectURL(downloadUrl);

                    showProgressModal(false);
                    addToHistory({ ...currentVideoData, downloadType: type, downloadedAt: Date.now() });
                }, 500);

            } catch (error) {
                console.error('Download fetch failed:', error);
                showError('Download failed. Trying to open in a new tab as fallback.');
                // Fallback for when fetching fails (e.g., proxy issue, large file)
                window.open(url, '_blank');
                showProgressModal(false);
            }
        }

        async function downloadPhotosAsZip(imageUrls, filename) {
            if (typeof JSZip === 'undefined') {
                showError('Could not load ZIP library. Please try again.');
                return;
            }
            showProgressModal(true);
            const zip = new JSZip();
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            let completed = 0;

            await Promise.all(imageUrls.map(async (url, index) => {
                try {
                    const response = await fetch(proxyUrl + encodeURIComponent(url));
                    if(response.ok) {
                        const blob = await response.blob();
                        zip.file(`image_${index + 1}.jpg`, blob);
                    }
                } catch (e) { console.error(`Failed to fetch image ${url}`, e); }
                completed++;
                updateProgress((completed / imageUrls.length) * 100);
            }));

            zip.generateAsync({ type: 'blob' }).then(content => {
                const downloadUrl = URL.createObjectURL(content);
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                a.remove();
                URL.revokeObjectURL(downloadUrl);
                
                showProgressModal(false);
                addToHistory({ ...currentVideoData, downloadType: 'photos', downloadedAt: Date.now() });
            });
        }

        // --- Progress Modal ---
        function showProgressModal(show) {
            document.getElementById('progressModal').classList.toggle('hidden', !show);
            if (show) updateProgress(0);
        }

        function updateProgress(percent) {
            document.getElementById('progressBar').style.width = `${percent}%`;
            document.getElementById('progressText').textContent = `${Math.round(percent)}%`;
        }
        
        // --- Favorites & History ---
        document.getElementById('favoriteBtn').addEventListener('click', () => {
            if (currentVideoData) toggleFavorite(currentVideoData);
        });

        function toggleFavorite(videoData) {
            const index = favorites.findIndex(fav => fav.url === videoData.url);
            const favoriteBtn = document.getElementById('favoriteBtn');
            const isFavorite = index !== -1;

            if (isFavorite) {
                favorites.splice(index, 1);
                favoriteBtn.innerHTML = '<i class="fas fa-heart mr-2"></i>Add to Favorites';
                favoriteBtn.classList.replace('bg-gray-500', 'bg-red-500');
                favoriteBtn.classList.replace('hover:bg-gray-600', 'hover:bg-red-600');
            } else {
                favorites.push(videoData);
                favoriteBtn.innerHTML = '<i class="fas fa-heart mr-2"></i>In Favorites';
                favoriteBtn.classList.replace('bg-red-500', 'bg-gray-500');
                favoriteBtn.classList.replace('hover:bg-red-600', 'hover:bg-gray-600');
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateHistoryDisplay();
        }

        function addToHistory(videoData) {
            downloadHistory.unshift(videoData);
            if (downloadHistory.length > 50) downloadHistory.pop();
            localStorage.setItem('downloadHistory', JSON.stringify(downloadHistory));
            updateRecentDownloads();
            updateHistoryDisplay();
        }

        function updateRecentDownloads() {
            const list = document.getElementById('recentList');
            const recent = downloadHistory.slice(0, 5);
            if (recent.length === 0) {
                list.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-8">No recent downloads</p>';
                return;
            }
            list.innerHTML = recent.map(item => `
                <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-accent rounded-lg">
                    <div class="flex items-center space-x-3 overflow-hidden">
                        <img src="${item.thumbnail}" alt="Thumbnail" class="w-12 h-16 object-cover rounded flex-shrink-0">
                        <div class="truncate">
                            <p class="font-medium text-gray-800 dark:text-white text-sm truncate">${item.title}</p>
                            <p class="text-gray-500 dark:text-gray-400 text-xs">@${item.author}</p>
                        </div>
                    </div>
                    <div class="text-right flex-shrink-0 ml-2">
                        <span class="text-xs text-gray-500 dark:text-gray-400">${new Date(item.downloadedAt).toLocaleDateString()}</span>
                        <p class="text-xs text-primary">${item.downloadType}</p>
                    </div>
                </div>`).join('');
        }

        function updateHistoryDisplay() {
            const favList = document.getElementById('favoritesList');
            document.getElementById('favoritesCount').textContent = `${favorites.length} items`;
            favList.innerHTML = favorites.length === 0 ? '<p class="text-gray-500 dark:text-gray-400 text-center py-4">No favorites yet</p>' :
                favorites.map(item => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-accent rounded-lg">
                        <div class="flex items-center space-x-3 overflow-hidden">
                            <img src="${item.thumbnail}" alt="Thumbnail" class="w-12 h-16 object-cover rounded flex-shrink-0">
                            <div class="truncate">
                                <p class="font-medium text-gray-800 dark:text-white text-sm truncate">${item.title}</p>
                                <p class="text-gray-500 dark:text-gray-400 text-xs">@${item.author}</p>
                            </div>
                        </div>
                        <button onclick="removeFavorite('${item.url}')" class="text-red-500 hover:text-red-600"><i class="fas fa-trash"></i></button>
                    </div>`).join('');

            const histList = document.getElementById('historyList');
            document.getElementById('historyCount').textContent = `${downloadHistory.length} items`;
            histList.innerHTML = downloadHistory.length === 0 ? '<p class="text-gray-500 dark:text-gray-400 text-center py-4">No download history</p>' :
                downloadHistory.map(item => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-accent rounded-lg">
                         <div class="flex items-center space-x-3 overflow-hidden">
                            <img src="${item.thumbnail}" alt="Thumbnail" class="w-12 h-16 object-cover rounded flex-shrink-0">
                            <div class="truncate">
                                <p class="font-medium text-gray-800 dark:text-white text-sm truncate">${item.title}</p>
                                <p class="text-gray-500 dark:text-gray-400 text-xs">@${item.author} &bull; ${new Date(item.downloadedAt).toLocaleDateString()}</p>
                            </div>
                        </div>
                        <span class="text-xs text-primary flex-shrink-0 ml-2">${item.downloadType}</span>
                    </div>`).join('');
        }

        window.removeFavorite = function(url) {
            favorites = favorites.filter(fav => fav.url !== url);
            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateHistoryDisplay();
        };

        document.getElementById('clearHistoryBtn').addEventListener('click', () => {
            if (downloadHistory.length > 0) {
                showConfirmDialog('Are you sure you want to clear all download history?', () => {
                    downloadHistory = [];
                    localStorage.setItem('downloadHistory', '[]');
                    updateHistoryDisplay();
                    updateRecentDownloads();
                });
            }
        });
        
        // --- Utilities & Misc UI ---
        function extractUsernameFromUrl(url) {
            const match = url.match(/@([^\/]+)/);
            return match ? match[1] : 'tiktok_user';
        }

        function showConfirmDialog(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-dark-secondary p-6 rounded-xl shadow-lg max-w-sm w-full mx-4">
                    <p class="text-gray-700 dark:text-gray-300 mb-6">${message}</p>
                    <div class="flex justify-end space-x-3">
                        <button class="cancel-btn px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">Cancel</button>
                        <button class="confirm-btn px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded-lg transition-colors">Confirm</button>
                    </div>
                </div>`;
            modal.querySelector('.cancel-btn').onclick = () => document.body.removeChild(modal);
            modal.querySelector('.confirm-btn').onclick = () => { onConfirm(); document.body.removeChild(modal); };
            document.body.appendChild(modal);
        }

        document.getElementById('shareBtn').addEventListener('click', () => {
            if (currentVideoData && navigator.share) {
                navigator.share({ title: 'Check out this TikTok video!', text: currentVideoData.title, url: currentVideoData.url });
            } else if(currentVideoData) {
                navigator.clipboard.writeText(currentVideoData.url).then(() => showError('Link copied to clipboard!'));
            }
        });

        document.querySelectorAll('.faq-question').forEach(q => q.addEventListener('click', () => {
            document.getElementById(q.dataset.target).classList.toggle('hidden');
            q.querySelector('i').classList.toggle('rotate-180');
        }));

        document.getElementById('contactForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner animate-spin mr-2"></i>Sending...';
            btn.disabled = true;
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-check mr-2"></i>Message Sent!';
                btn.classList.replace('from-primary', 'from-green-500');
                btn.classList.replace('to-purple-600', 'to-green-600');
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    btn.classList.replace('from-green-500', 'from-primary');
                    btn.classList.replace('to-green-600', 'to-purple-600');
                    e.target.reset();
                }, 2000);
            }, 1500);
        });

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            updateRecentDownloads();
            updateHistoryDisplay();
            const initialUrl = tiktokUrlInput.value.trim();
            if (initialUrl) downloadBtn.disabled = !isValidTikTokUrl(initialUrl);
        });
    </script>
</body>
</html>
